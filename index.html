<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ChatBot Unicomfacauca</title>
  <style>
    :root{
      --blue:#004991; --pastel:#eaf2fb; --text:#0a2342;
      --muted:#5e6b7a; --card:#fff; --shadow:0 12px 28px rgba(0,0,0,.08);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0}
    body{
      display:flex; align-items:center; justify-content:center; /* tarjeta centrada */
      background:var(--pastel); color:var(--text);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; line-height:1.45;
      padding:12px;
    }
    .card{
      width:min(94vw,540px);
      background:var(--card);
      border-radius:18px;
      box-shadow:var(--shadow);
      overflow:hidden;
      position:relative;
      z-index:1;
      margin-bottom:110px; /* espacio para el botón del widget */
    }
    .bar{height:6px;background:var(--blue)}
    .content{padding:16px 18px}
    .logo-wrap{
      display:flex;flex-direction:column;align-items:center;
      gap:.65rem;margin-bottom:.25rem;text-align:center
    }
    .logo{width:clamp(7.5em,20vw,11em);height:auto}
    h1{
      font-size:clamp(1.05rem,2.2vw + .55rem,1.35rem);
      margin:0;color:var(--blue);font-weight:700;text-align:center
    }
    p{margin:.35rem 0 0;color:var(--muted);text-align:center}
    .body-text{margin-top:.55rem;font-size:clamp(.95rem,1rem,1.05rem);color:#243041}
    .tips{
      background:#f6f9ff;border-top:1px solid #eef3ff;
      padding:10px 14px;font-size:.9rem;color:#334;text-align:center
    }
  </style>
</head>
<body>
  <main class="card" role="main" aria-label="Tarjeta de acceso a ReglaChat">
    <div class="bar" aria-hidden="true"></div>

    <div class="content">
      <header class="logo-wrap">
        <img class="logo"
             src="https://www.unicomfacauca.edu.co/wp-content/themes/understrap-child-main/assets/img/logo.svg"
             alt="Logo institucional Unicomfacauca" width="512" height="160" />
        <h1>Asistente Virtual Unicomfacauca</h1>
        <p>Hablas con el asistente del Reglamento Estudiantil.</p>
      </header>

      <section class="body-text">
        El Asistente te orienta sobre el Reglamento Estudiantil de forma clara y pedagógica.
        La información es referencial; en caso de duda, prevalece el documento oficial vigente.
      </section>
    </div>

    <footer class="tips">
      <strong>Consejo:</strong> si no ves el botón, espera 2–3 segundos; si persiste, revisa permisos de micrófono.
    </footer>
  </main>

  <!-- ÚNICO widget oficial de ElevenLabs -->
  <elevenlabs-convai id="convai" agent-id="agent_5901k43j8mnne8psczk9n22gnfj2"></elevenlabs-convai>
  <script src="https://unpkg.com/@elevenlabs/convai-widget-embed" async type="text/javascript"></script>

  <script>
    // Intenta poner el texto del botón en español ("Iniciar llamada") si el widget lo expone
    function localizeWidgetButton() {
      // Buscar en DOM “normal”
      let btn = document.querySelector('button[aria-label="Start a call"], button[aria-label="Open call"]');
      if (!btn) {
        // Buscar en shadow DOM del elemento <elevenlabs-convai>
        const host = document.getElementById('convai');
        if (host && host.shadowRoot) {
          btn = host.shadowRoot.querySelector('button, [role="button"]');
        }
      }
      if (!btn) return;

      // Cambiar aria-label y el texto si hay un nodo de texto visible
      btn.setAttribute('aria-label', 'Iniciar llamada');
      // Busca posibles spans/labels de texto dentro del botón
      const labelNode = Array.from(btn.querySelectorAll('span,div,strong,p')).find(n => (n.textContent || '').trim().length > 0);
      if (labelNode) labelNode.textContent = 'Iniciar llamada';
    }

    // Observa cuando cargue/re-renderice el widget y aplica la localización
    const mo = new MutationObserver(localizeWidgetButton);
    mo.observe(document.documentElement, { childList: true, subtree: true });

    // Intentos escalonados por si el widget tarda en montar
    window.addEventListener('load', () => {
      setTimeout(localizeWidgetButton, 400);
      setTimeout(localizeWidgetButton, 1000);
      setTimeout(localizeWidgetButton, 2000);
    });
  </script>

  <noscript>Habilita JavaScript para usar ReglaChat.</noscript>
</body>
</html>






